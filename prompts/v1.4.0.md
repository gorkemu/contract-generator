# Contract-Generator Proje GeliÅŸtirme Promptu
## SÃ¼rÃ¼m Takibi
### Mevcut Versiyon: 1.4.0  
### Son GÃ¼ncelleme: 2025-4-5  

### ðŸ“Œ Mevcut Durum
#### AÃ§Ä±klama:  
KullanÄ±cÄ±larÄ±n TÃ¼rkÃ§e karakter desteÄŸiyle sÃ¶zleÅŸme ÅŸablonlarÄ±nÄ± dÃ¼zenleyip PDF olarak indirebildiÄŸi bir web uygulamasÄ±. Backend entegrasyonu tamamlandÄ±, artÄ±k veriler MongoDB'de saklanÄ±yor.

#### Teknik YapÄ±:
```mermaid
graph TD  
    A[React Frontend] --> B[Node.js API]  
    B --> C[(MongoDB Atlas)]  
    B --> D[PDF Generation]  
```
### ðŸ” AI Asistan EtkileÅŸim ProtokolÃ¼ 
#### 1. Dosya YapÄ±sÄ± Sorgulama
##### ðŸ“‚ Kod Analiz Ä°steÄŸi
Asistan aÅŸaÄŸÄ±daki adÄ±mlarÄ± izlemelidir:
1. Proje dosya yapÄ±sÄ±nÄ± almak iÃ§in bu komutu kullanmalÄ± (`.env`, `node_modules` ve gereksiz dosyalarÄ± hariÃ§ tutar):
```bash
find . -type d \( -name "node_modules" -o -name ".git" -o -name ".env*" \) -prune -o \
-type f \( -name "*.js" -o -name "*.jsx" -o -name "*.css" -o -name "*.json" \) \
-exec grep -il "editor\|pdf\|api\|db" {} + | sort -u
```
2. Ã–rnek Ã§Ä±ktÄ± filtreleme:
```bash
# Sadece ilgili dosyalarÄ± gÃ¶ster:
| grep -vE '(.lock|.min.|test|spec|mock)'
```
3. DeÄŸiÅŸiklik yapÄ±lacak kritik dosyalarÄ±n mevcut iÃ§eriklerini istemeli.
```markdown
[LÃ¼tfen ÅŸu dosya tÃ¼rlerini kontrol edin:
- */components/*.{js,jsx}
- */utils/*.{js,json}
- *config*.json
- *package.json]
```

#### 2. DeÄŸiÅŸiklik Ã–neri AkÄ±ÅŸÄ±  
##### âœ¨ GeliÅŸtirme AkÄ±ÅŸÄ±
Asistan ÅŸu sÄ±rayla hareket etmelidir:
1. **Analiz**: Ä°stenen deÄŸiÅŸikliklerin teknik etkilerini Ã¶zetlesin
2. **Plan**: Hangi dosyalarda ne deÄŸiÅŸeceÄŸini liste halinde sunsun
3. **Kod**: TÃ¼m ilgili dosyalarÄ±n *tam revize edilmiÅŸ hallerini* aÅŸaÄŸÄ±daki formatta versin:

```javascript
// src/utils/db.js (Ã–rnek Format)
/*
 * DeÄŸiÅŸiklik Ã–zeti: MongoDB baÄŸlantÄ± wrapper'Ä± eklendi
 * Etkilenen Alanlar: 
 *   - Yeni mongoose schema
 *   - Connection manager
 */

const mongoose = require('mongoose');
// ... tÃ¼m revize kod burada ...
```

##### âœ”ï¸ Kriterler
- Kod bloklarÄ± her zaman tam dosya iÃ§eriÄŸi iÃ§ermeli
- Yorum satÄ±rlarÄ±nda deÄŸiÅŸiklik Ã¶zeti bulunmalÄ±
- Ã–nceki ve sonraki versiyonlar diff formatÄ±nda gÃ¶sterilmemeli


#### 3. DoÄŸrulama TalimatÄ±  
##### ðŸ”„ GÃ¼ncelleme SonrasÄ± Kontroller
Asistan ÅŸunlarÄ± hatÄ±rlatmalÄ±dÄ±r:
1. Test ederken kontrol listesi:
   - [ ] TÃ¼rkÃ§e karakter render testi
   - [ ] State yÃ¶netimi konsol loglarÄ±
   - [ ] API Ã§aÄŸrÄ±larÄ± iÃ§in mock servis
2. Versiyon gÃ¼ncelleme talimatÄ±:
```bash
# Prompt versiyonunu yÃ¼kseltmek iÃ§in:
sed -i 's/v1.3.0/v1.4.0/g' prompts/v1.3.0.md
```

#### 4. Hata YÃ¶netim ProtokolÃ¼
##### ðŸ”„ Revize SonrasÄ± Ã‡alÄ±ÅŸmama Durumu
###### AsistanÄ±n DavranÄ±ÅŸ KurallarÄ±
###### Full Code PaylaÅŸÄ±mÄ±
- Hata oluÅŸtuÄŸunda yeni revizyonu iÃ§eren tÃ¼m dosyanÄ±n gÃ¼ncel halini tekrar paylaÅŸmalÄ±
- Diff/parÃ§alÄ± deÄŸil, her seferinde tam dosya iÃ§eriÄŸi sunmalÄ±
###### Hata Analizi
```markdown
### ðŸ› ï¸ Hata Ã‡Ã¶zÃ¼m AdÄ±mlarÄ±
1. [ ] Hata mesajÄ±nÄ± tam olarak iletin
2. [ ] Ã‡alÄ±ÅŸmayan kodu nasÄ±l tetiklediÄŸinizi aÃ§Ä±klayÄ±n
3. [ ] Beklenen ve gerÃ§ekleÅŸen davranÄ±ÅŸ farkÄ±nÄ± belirtin
```
###### Ã‡Ã¶zÃ¼m FormatÄ±
```javascript
// src/utils/db.js (Hata Revizyon Ã–rneÄŸi)
/**
 * HATA: MongoDB baÄŸlantÄ± zaman aÅŸÄ±mÄ±
 * NEDEN: Promise zinciri kopuyor
 * Ã‡Ã–ZÃœM: async/await refactor
 * DEÄžÄ°ÅžEN SATIRLAR: 15-28
 */
const connectDB = async () => {
  try {
    await mongoose.connect(uri, {
      connectTimeoutMS: 5000,
      socketTimeoutMS: 30000
    });
  } catch (err) {
    throw new Error(`DB Connection Failed: ${err.message}`);
  }
};
```
##### ðŸ“œ Hata Ã‡Ã¶zÃ¼m Kriterleri
**- Zorunluluklar:**
- Hata reprodÃ¼ksiyon adÄ±mlarÄ± iÃ§ermeli
- Ã–nceki ve sonraki kod karÅŸÄ±laÅŸtÄ±rmasÄ± (yorum satÄ±rlarÄ±nda)
- Ã‡Ã¶zÃ¼mÃ¼n alternatif yÃ¶ntemleri aÃ§Ä±klanmalÄ±

**- Yasaklar:**
- Sadece hatalÄ± kÄ±smÄ± gÃ¶steren partial kod
- "Åžunu dene" gibi belirsiz Ã¶neriler
- StackTrace analizi yapÄ±lmamÄ±ÅŸ Ã§Ã¶zÃ¼m

###### Ã–rnek EtkileÅŸim
```markdown
[KULLANICI]
Hata: "UnhandledPromiseRejection" db.js:18
NasÄ±l Tetikledim: Sunucu baÅŸlatÄ±rken

[ASÄ°STAN]
// src/utils/db.js (Tam Revizyon)
/**
 * Ã‡Ã–ZÃœM: TÃ¼m promise'ler try-catch iÃ§ine alÄ±ndÄ±
 * YENÄ°: Connection timeout parametreleri eklendi
 */
const connectDB = async () => {
  try {
    // ... full implementation ...
  } catch (err) {
    logger.error(`DB Error: ${err.stack}`); // â† Yeni hata loglama
  }
};
```

### âœ… Son Tamamlananlar
1. **Backend Entegrasyonu**
- server/ klasÃ¶r yapÄ±sÄ± oluÅŸturuldu
- MongoDB baÄŸlantÄ±sÄ± (mongoose)
- Temel CRUD API endpoint'leri
- Postman/curl test senaryolarÄ±

2. **Dosya YapÄ±sÄ±**
```
server/
â”œâ”€â”€ models/
â”‚   â””â”€â”€ Contract.js           # MongoDB ÅŸema tanÄ±mÄ±
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ contracts.js          # API rotalarÄ±
â”œâ”€â”€ server.js                 # Express sunucusu
â””â”€â”€ .env                      # DB baÄŸlantÄ± bilgileri`
```

### ðŸ› Aktif Sorunlar

| No | Sorun | Ã–ncelik | Ã‡Ã¶zÃ¼m Ã–nerisi |
|----|-------|---------|---------------|
| 1  | Madde silme iÅŸlemi kalÄ±cÄ± olmuyor | High | MongoDB entegrasyonunun tamamlanmasÄ± |
| 2  | EditÃ¶r fare tÄ±klamalarÄ±nda kapanÄ±yor | High | Click-outside algÄ±lama fix |
| 3  | Ä°ptal butonu Ã¶nceki state'i restore etmiyor | Medium | State snapshot mekanizmasÄ± |

### ðŸ“ Ä°stenen GeliÅŸtirmeler & ðŸ”„ DeÄŸiÅŸiklik Talepleri

**1. server/routes/contracts.js (Eklenecek):**
```javascript
/*
 * DeÄŸiÅŸiklik Ã–zeti: DELETE endpoint eklenecek
 * Etkilenen Alanlar:
 *   - SÃ¶zleÅŸme silme iÅŸlemi
 */
router.delete('/:id', async (req, res) => {
  try {
    await Contract.findByIdAndDelete(req.params.id);
    res.sendStatus(204);
  } catch (err) {
    res.status(500).json({ message: err.message });
  }
});

```
**2. client/src/utils/api.js (GÃ¼ncellenecek):**
```javascript
/*
 * DeÄŸiÅŸiklik Ã–zeti: CRUD fonksiyonlarÄ± tamamlanacak
 */
export const deleteContract = async (id) => {
  await fetch(`/api/contracts/${id}`, { method: 'DELETE' });
};
```
